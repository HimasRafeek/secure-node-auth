<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fastify Integration - Secure Node Auth</title>
    <meta name="description" content="Learn how to integrate Secure Node Auth with Fastify framework. Complete guide with examples and best practices." />

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Fastify Integration - Secure Node Auth" />
    <meta property="og:description" content="Learn how to integrate Secure Node Auth with Fastify framework. Complete guide with examples and best practices." />
    <meta property="og:site_name" content="Secure Node Auth" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Fastify Integration - Secure Node Auth" />
    <meta name="twitter:description" content="Learn how to integrate Secure Node Auth with Fastify framework. Complete guide with examples and best practices." />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#667eea',
              secondary: '#764ba2',
            },
          },
        },
      };
    </script>

    <!-- Marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Highlight.js for code syntax highlighting -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,
          sans-serif;
      }

      /* Sidebar styles */
      .sidebar {
        position: fixed;
        top: 64px;
        left: 0;
        bottom: 0;
        width: 280px;
        overflow-y: auto;
        background: #1a202c;
        border-right: 1px solid #2d3748;
        transition: transform 0.3s ease;
      }

      .sidebar::-webkit-scrollbar {
        width: 6px;
      }

      .sidebar::-webkit-scrollbar-track {
        background: #1a202c;
      }

      .sidebar::-webkit-scrollbar-thumb {
        background: #4a5568;
        border-radius: 3px;
      }

      .sidebar-hidden {
        transform: translateX(-100%);
      }

      .content-wrapper {
        margin-left: 280px;
        transition: margin-left 0.3s ease;
      }

      .content-wrapper.expanded {
        margin-left: 0;
      }

      /* TOC styles */
      .toc-item {
        padding: 0.5rem 1rem;
        cursor: pointer;
        transition: all 0.2s;
        border-left: 3px solid transparent;
      }

      .toc-item:hover {
        background: #2d3748;
        border-left-color: #667eea;
      }

      .toc-item.active {
        background: #2d3748;
        border-left-color: #667eea;
        color: #667eea;
      }

      .toc-h2 {
        font-size: 0.875rem;
        font-weight: 600;
      }

      .toc-h3 {
        font-size: 0.8rem;
        padding-left: 1.5rem;
        color: #a0aec0;
      }

      /* Markdown styles */
      .markdown-body {
        color: #e1e4e8;
        line-height: 1.8;
      }

      .markdown-body h1 {
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 1.5rem;
        padding-bottom: 0.75rem;
        border-bottom: 2px solid #667eea;
        scroll-margin-top: 80px;
      }

      .markdown-body h2 {
        font-size: 2rem;
        font-weight: bold;
        margin-top: 3rem;
        margin-bottom: 1rem;
        color: #667eea;
        scroll-margin-top: 80px;
      }

      .markdown-body h3 {
        font-size: 1.5rem;
        font-weight: bold;
        margin-top: 2rem;
        margin-bottom: 0.75rem;
        color: #8b9cdb;
        scroll-margin-top: 80px;
      }

      .markdown-body h4 {
        font-size: 1.25rem;
        font-weight: bold;
        margin-top: 1.5rem;
        margin-bottom: 0.5rem;
        color: #a0aec0;
      }

      .markdown-body p {
        margin-bottom: 1rem;
      }

      .markdown-body ul,
      .markdown-body ol {
        margin-bottom: 1rem;
        padding-left: 2rem;
      }

      .markdown-body li {
        margin-bottom: 0.5rem;
      }

      .markdown-body code {
        background: #1a1a2e;
        padding: 0.2rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.9em;
        font-family: 'Consolas', 'Monaco', monospace;
      }

      .markdown-body pre {
        background: #1a1a2e;
        padding: 1.5rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        margin: 1.5rem 0;
        border: 1px solid #2d3748;
      }

      .markdown-body pre code {
        background: transparent;
        padding: 0;
      }

      .markdown-body a {
        color: #667eea;
        text-decoration: none;
        transition: color 0.2s;
      }

      .markdown-body a:hover {
        color: #8b9cdb;
        text-decoration: underline;
      }

      .markdown-body blockquote {
        border-left: 4px solid #667eea;
        padding-left: 1rem;
        margin: 1.5rem 0;
        color: #a0aec0;
        background: #1a202c;
        padding: 1rem;
        border-radius: 0.25rem;
      }

      .markdown-body table {
        width: 100%;
        margin: 1.5rem 0;
        border-collapse: collapse;
      }

      .markdown-body th,
      .markdown-body td {
        border: 1px solid #4a5568;
        padding: 0.75rem;
        text-align: left;
      }

      .markdown-body th {
        background: #2d3748;
        font-weight: bold;
        color: #667eea;
      }

      .markdown-body tr:hover {
        background: #1a202c;
      }

      .markdown-body img {
        max-width: 100%;
        height: auto;
        border-radius: 0.5rem;
        margin: 1.5rem 0;
      }

      .markdown-body hr {
        border: none;
        border-top: 2px solid #2d3748;
        margin: 2rem 0;
      }

      /* Navigation buttons */
      .nav-button {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 0.5rem;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s;
      }

      .nav-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      .nav-button-outline {
        background: transparent;
        border: 2px solid #667eea;
        color: #667eea;
      }

      .nav-button-outline:hover {
        background: #667eea;
        color: white;
      }

      /* Mobile styles */
      @media (max-width: 768px) {
        .sidebar {
          transform: translateX(-100%);
        }

        .sidebar.mobile-open {
          transform: translateX(0);
          z-index: 40;
        }

        .content-wrapper {
          margin-left: 0;
        }
      }
    </style>
  </head>
  <body class="bg-gray-900 text-white">
    <!-- Top Navigation -->
    <nav
      class="fixed w-full top-0 z-50 bg-gray-900 border-b border-gray-800 backdrop-blur-lg bg-opacity-95"
    >
      <div class="px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <div class="flex items-center gap-4">
            <button
              id="sidebar-toggle"
              class="text-2xl text-gray-300 hover:text-primary transition"
            >
              <i class="fas fa-bars"></i>
            </button>
            <a href="/" class="flex items-center space-x-2">
              <i class="fas fa-shield-alt text-primary text-2xl"></i>
              <span class="text-xl font-bold">SecureNodeAuth</span>
            </a>
          </div>
          <div class="flex items-center gap-4">
            <a
              href="/"
              class="flex items-center gap-2 text-gray-300 hover:text-primary transition"
            >
              <i class="fas fa-home"></i>
              <span>Home</span>
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Sidebar with TOC -->
    <aside id="sidebar" class="sidebar">
      <div class="p-4">
        <h3 class="text-sm font-bold text-gray-400 uppercase mb-2">Table of Contents</h3>
        <div id="toc" class="space-y-1">
    <div class="toc-item toc-h1" data-target="heading-0">
      Fastify Integration Guide
    </div>
    <div class="toc-item toc-h2" data-target="heading-1">
      üöÄ Quick Start
    </div>
    <div class="toc-item toc-h3" data-target="heading-2">
      1. Install Dependencies
    </div>
    <div class="toc-item toc-h3" data-target="heading-3">
      2. Basic Setup
    </div>
    <div class="toc-item toc-h2" data-target="heading-4">
      üìã Available Routes
    </div>
    <div class="toc-item toc-h3" data-target="heading-5">
      Authentication Routes
    </div>
    <div class="toc-item toc-h3" data-target="heading-6">
      Email Verification Routes
    </div>
    <div class="toc-item toc-h3" data-target="heading-7">
      Password Reset Routes
    </div>
    <div class="toc-item toc-h2" data-target="heading-8">
      üîí Protecting Routes
    </div>
    <div class="toc-item toc-h3" data-target="heading-9">
      Using the Plugin Decorator
    </div>
    <div class="toc-item toc-h3" data-target="heading-10">
      Manual Authentication
    </div>
    <div class="toc-item toc-h2" data-target="heading-11">
      üí° Complete Example
    </div>
    <div class="toc-item toc-h2" data-target="heading-12">
      üé® Custom Route Configuration
    </div>
    <div class="toc-item toc-h3" data-target="heading-13">
      Disable Auto Routes
    </div>
    <div class="toc-item toc-h3" data-target="heading-14">
      Custom Prefix
    </div>
    <div class="toc-item toc-h2" data-target="heading-15">
      üîß Schema Validation
    </div>
    <div class="toc-item toc-h3" data-target="heading-16">
      Custom Validation
    </div>
    <div class="toc-item toc-h2" data-target="heading-17">
      ‚ö° Performance Features
    </div>
    <div class="toc-item toc-h3" data-target="heading-18">
      Rate Limiting
    </div>
    <div class="toc-item toc-h3" data-target="heading-19">
      Custom Rate Limits Per Route
    </div>
    <div class="toc-item toc-h2" data-target="heading-20">
      üß™ Testing
    </div>
    <div class="toc-item toc-h2" data-target="heading-21">
      üîÑ Comparison: Express vs Fastify
    </div>
    <div class="toc-item toc-h3" data-target="heading-22">
      Express Example
    </div>
    <div class="toc-item toc-h3" data-target="heading-23">
      Fastify Example
    </div>
    <div class="toc-item toc-h2" data-target="heading-24">
      üìö Additional Resources
    </div>
    <div class="toc-item toc-h2" data-target="heading-25">
      üéØ Why Choose Fastify?
    </div></div>
      </div>
    </aside>

    <!-- Main Content -->
    <div id="content-wrapper" class="content-wrapper pt-20 pb-12 px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <!-- Markdown Content (Server-rendered for SEO) -->
        <div id="content" class="markdown-body"><h1 id="heading-0">Fastify Integration Guide</h1><p>Complete guide for using SecureNodeAuth with Fastify framework.</p>
<hr>
<h2 id="heading-1">üöÄ Quick Start</h2><h3 id="heading-2">1. Install Dependencies</h3><pre><code class="language-bash">npm install secure-node-auth fastify @fastify/rate-limit fastify-plugin mysql2
</code></pre>
<h3 id="heading-3">2. Basic Setup</h3><pre><code class="language-javascript">const fastify = require(&#39;fastify&#39;)({ logger: true });
const SecureNodeAuth = require(&#39;secure-node-auth&#39;);
const secureNodeAuthPlugin = require(&#39;secure-node-auth/src/middleware/FastifyPlugin&#39;);

// Initialize auth
const auth = new SecureNodeAuth({
  connection: {
    host: process.env.DB_HOST,
    user: process.env.DB_USER,
    password: process.env.DB_PASSWORD,
    database: process.env.DB_NAME
  },
  jwt: {
    accessSecret: process.env.JWT_ACCESS_SECRET,
    refreshSecret: process.env.JWT_REFRESH_SECRET
  }
});

// Initialize database
await auth.init();

// Register plugin (includes all auth routes)
await fastify.register(secureNodeAuthPlugin, {
  authInstance: auth,
  routeOptions: {
    prefix: &#39;/auth&#39;, // Default prefix
    verificationUrl: &#39;http://localhost:3000/verify-email&#39;,
    passwordResetUrl: &#39;http://localhost:3000/reset-password&#39;
  }
});

// Start server
await fastify.listen({ port: 3000 });
console.log(&#39;Server running on http://localhost:3000&#39;);
</code></pre>
<hr>
<h2 id="heading-4">üìã Available Routes</h2><p>Once registered, you get these routes automatically:</p>
<h3 id="heading-5">Authentication Routes</h3><ul>
<li><code>POST /auth/register</code> - Register new user</li>
<li><code>POST /auth/login</code> - Login user</li>
<li><code>POST /auth/refresh</code> - Refresh access token</li>
<li><code>POST /auth/logout</code> - Logout (revoke refresh token)</li>
<li><code>POST /auth/logout-all</code> - Logout from all devices</li>
<li><code>GET /auth/me</code> - Get current user (protected)</li>
<li><code>PATCH /auth/me</code> - Update user profile (protected)</li>
<li><code>POST /auth/change-password</code> - Change password (protected)</li>
<li><code>POST /auth/verify</code> - Verify access token</li>
<li><code>GET /auth/health</code> - Health check</li>
</ul>
<h3 id="heading-6">Email Verification Routes</h3><ul>
<li><code>POST /auth/send-verification-email</code> - Send verification email</li>
<li><code>POST /auth/verify-email</code> - Verify email with token</li>
<li><code>POST /auth/resend-verification-email</code> - Resend verification email</li>
</ul>
<h3 id="heading-7">Password Reset Routes</h3><ul>
<li><code>POST /auth/forgot-password</code> - Send password reset email</li>
<li><code>POST /auth/reset-password</code> - Reset password with token</li>
</ul>
<hr>
<h2 id="heading-8">üîí Protecting Routes</h2><h3 id="heading-9">Using the Plugin Decorator</h3><pre><code class="language-javascript">// The plugin adds fastify.authenticate decorator
fastify.get(&#39;/protected&#39;, {
  preHandler: fastify.authenticate
}, async (request, reply) =&gt; {
  // request.user is available (from JWT)
  return {
    message: &#39;This is protected!&#39;,
    user: request.user
  };
});

// Multiple preHandlers
fastify.post(&#39;/admin-only&#39;, {
  preHandler: [fastify.authenticate, checkAdminRole]
}, async (request, reply) =&gt; {
  return { message: &#39;Admin access granted&#39; };
});
</code></pre>
<h3 id="heading-10">Manual Authentication</h3><pre><code class="language-javascript">// Without plugin, use auth instance directly
fastify.addHook(&#39;preHandler&#39;, async (request, reply) =&gt; {
  const authHeader = request.headers.authorization;
  
  if (!authHeader || !authHeader.startsWith(&#39;Bearer &#39;)) {
    return reply.code(401).send({ error: &#39;No token provided&#39; });
  }

  const token = authHeader.substring(7);
  
  try {
    const decoded = await auth.verifyAccessToken(token);
    request.user = decoded;
  } catch (error) {
    return reply.code(401).send({ error: &#39;Invalid token&#39; });
  }
});
</code></pre>
<hr>
<h2 id="heading-11">üí° Complete Example</h2><pre><code class="language-javascript">const fastify = require(&#39;fastify&#39;)({ logger: true });
const SecureNodeAuth = require(&#39;secure-node-auth&#39;);
const secureNodeAuthPlugin = require(&#39;secure-node-auth/src/middleware/FastifyPlugin&#39;);

async function buildApp() {
  // Initialize auth
  const auth = new SecureNodeAuth({
    connection: {
      host: &#39;localhost&#39;,
      user: &#39;root&#39;,
      password: &#39;password&#39;,
      database: &#39;myapp&#39;
    },
    jwt: {
      accessSecret: &#39;your-32-char-secret-here&#39;,
      refreshSecret: &#39;your-32-char-refresh-secret&#39;
    },
    smtp: {
      host: &#39;smtp.gmail.com&#39;,
      port: 587,
      auth: {
        user: process.env.SMTP_USER,
        pass: process.env.SMTP_PASS
      }
    },
    verificationUrl: &#39;http://localhost:3000/verify-email&#39;,
    passwordResetUrl: &#39;http://localhost:3000/reset-password&#39;
  });

  await auth.init();

  // Register auth plugin
  await fastify.register(secureNodeAuthPlugin, {
    authInstance: auth,
    routeOptions: {
      prefix: &#39;/api/auth&#39;,
      enableRateLimit: true,
      rateLimitMax: 10,
      rateLimitWindow: 15 * 60 * 1000 // 15 minutes
    }
  });

  // Public route
  fastify.get(&#39;/&#39;, async (request, reply) =&gt; {
    return { message: &#39;Welcome to the API&#39; };
  });

  // Protected route using decorator
  fastify.get(&#39;/api/profile&#39;, {
    preHandler: fastify.authenticate
  }, async (request, reply) =&gt; {
    const user = await auth.getUserById(request.user.userId);
    return { user };
  });

  // Protected route with custom logic
  fastify.get(&#39;/api/dashboard&#39;, {
    preHandler: fastify.authenticate
  }, async (request, reply) =&gt; {
    const isVerified = await auth.isEmailVerified(request.user.userId);
    
    if (!isVerified) {
      return reply.code(403).send({
        error: &#39;Please verify your email first&#39;
      });
    }

    return {
      message: &#39;Welcome to dashboard&#39;,
      userId: request.user.userId
    };
  });

  // Custom endpoint using auth methods
  fastify.post(&#39;/api/custom-register&#39;, async (request, reply) =&gt; {
    try {
      const { email, password, customField } = request.body;
      
      const result = await auth.register({
        email,
        password,
        customField
      });

      return reply.code(201).send({
        success: true,
        data: result
      });
    } catch (error) {
      return reply.code(400).send({
        error: error.message
      });
    }
  });

  return fastify;
}

// Start server
buildApp()
  .then(app =&gt; app.listen({ port: 3000 }))
  .then(() =&gt; console.log(&#39;üöÄ Server running on http://localhost:3000&#39;))
  .catch(error =&gt; {
    console.error(&#39;Failed to start server:&#39;, error);
    process.exit(1);
  });
</code></pre>
<hr>
<h2 id="heading-12">üé® Custom Route Configuration</h2><h3 id="heading-13">Disable Auto Routes</h3><pre><code class="language-javascript">await fastify.register(secureNodeAuthPlugin, {
  authInstance: auth,
  routeOptions: {
    registerRoutes: false // Don&#39;t auto-register routes
  }
});

// Now you can create custom routes manually
const FastifyRoutes = require(&#39;secure-node-auth/src/middleware/FastifyRoutes&#39;);
const routes = new FastifyRoutes(auth);

fastify.post(&#39;/custom/login&#39;, async (request, reply) =&gt; {
  // Use routes._login or call auth.login() directly
  const { email, password } = request.body;
  const result = await auth.login(email, password);
  return result;
});
</code></pre>
<h3 id="heading-14">Custom Prefix</h3><pre><code class="language-javascript">await fastify.register(secureNodeAuthPlugin, {
  authInstance: auth,
  routeOptions: {
    prefix: &#39;/api/v1/authentication&#39; // Custom prefix
  }
});

// Routes are now at /api/v1/authentication/login, etc.
</code></pre>
<hr>
<h2 id="heading-15">üîß Schema Validation</h2><p>Fastify has built-in JSON schema validation. All routes include schemas:</p>
<pre><code class="language-javascript">// Example: Register route schema
{
  body: {
    type: &#39;object&#39;,
    required: [&#39;email&#39;, &#39;password&#39;],
    properties: {
      email: { type: &#39;string&#39;, format: &#39;email&#39; },
      password: { type: &#39;string&#39;, minLength: 8 },
      firstName: { type: &#39;string&#39; },
      lastName: { type: &#39;string&#39; }
    }
  },
  response: {
    201: {
      type: &#39;object&#39;,
      properties: {
        success: { type: &#39;boolean&#39; },
        message: { type: &#39;string&#39; },
        data: { type: &#39;object&#39; }
      }
    }
  }
}
</code></pre>
<h3 id="heading-16">Custom Validation</h3><pre><code class="language-javascript">fastify.post(&#39;/custom-register&#39;, {
  schema: {
    body: {
      type: &#39;object&#39;,
      required: [&#39;email&#39;, &#39;password&#39;, &#39;age&#39;],
      properties: {
        email: { type: &#39;string&#39;, format: &#39;email&#39; },
        password: { type: &#39;string&#39;, minLength: 10 },
        age: { type: &#39;number&#39;, minimum: 18 }
      }
    }
  }
}, async (request, reply) =&gt; {
  const result = await auth.register(request.body);
  return result;
});
</code></pre>
<hr>
<h2 id="heading-17">‚ö° Performance Features</h2><h3 id="heading-18">Rate Limiting</h3><p>Built-in rate limiting using <code>@fastify/rate-limit</code>:</p>
<pre><code class="language-javascript">await fastify.register(secureNodeAuthPlugin, {
  authInstance: auth,
  routeOptions: {
    enableRateLimit: true,
    rateLimitMax: 5, // 5 requests
    rateLimitWindow: 60 * 1000 // per minute
  }
});
</code></pre>
<h3 id="heading-19">Custom Rate Limits Per Route</h3><pre><code class="language-javascript">// After registering plugin
fastify.post(&#39;/sensitive-endpoint&#39;, {
  preHandler: fastify.authenticate,
  config: {
    rateLimit: {
      max: 2,
      timeWindow: 60 * 1000
    }
  }
}, async (request, reply) =&gt; {
  return { message: &#39;Sensitive operation&#39; };
});
</code></pre>
<hr>
<h2 id="heading-20">üß™ Testing</h2><pre><code class="language-javascript">const { test } = require(&#39;tap&#39;);
const buildApp = require(&#39;./app&#39;); // Your app factory

test(&#39;POST /auth/register creates user&#39;, async t =&gt; {
  const app = await buildApp();
  
  const response = await app.inject({
    method: &#39;POST&#39;,
    url: &#39;/auth/register&#39;,
    payload: {
      email: &#39;test@example.com&#39;,
      password: &#39;SecurePass123!&#39;
    }
  });

  t.equal(response.statusCode, 201);
  const json = response.json();
  t.ok(json.success);
  t.ok(json.data.tokens.accessToken);
  
  await app.close();
});

test(&#39;GET /auth/me requires authentication&#39;, async t =&gt; {
  const app = await buildApp();
  
  // Without token
  const response1 = await app.inject({
    method: &#39;GET&#39;,
    url: &#39;/auth/me&#39;
  });
  t.equal(response1.statusCode, 401);

  // With token
  const registerRes = await app.inject({
    method: &#39;POST&#39;,
    url: &#39;/auth/register&#39;,
    payload: {
      email: &#39;test2@example.com&#39;,
      password: &#39;SecurePass123!&#39;
    }
  });
  const { accessToken } = registerRes.json().data.tokens;

  const response2 = await app.inject({
    method: &#39;GET&#39;,
    url: &#39;/auth/me&#39;,
    headers: {
      authorization: `Bearer ${accessToken}`
    }
  });
  t.equal(response2.statusCode, 200);
  t.ok(response2.json().data);
  
  await app.close();
});
</code></pre>
<hr>
<h2 id="heading-21">üîÑ Comparison: Express vs Fastify</h2><table>
<thead>
<tr>
<th>Feature</th>
<th>Express</th>
<th>Fastify</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Setup</strong></td>
<td><code>app.use(&#39;/auth&#39;, authRoutes.getRouter())</code></td>
<td><code>await fastify.register(plugin, options)</code></td>
</tr>
<tr>
<td><strong>Middleware</strong></td>
<td><code>app.use(auth.middleware())</code></td>
<td><code>preHandler: fastify.authenticate</code></td>
</tr>
<tr>
<td><strong>Validation</strong></td>
<td><code>express-validator</code></td>
<td>Built-in JSON Schema</td>
</tr>
<tr>
<td><strong>Rate Limit</strong></td>
<td><code>express-rate-limit</code></td>
<td><code>@fastify/rate-limit</code></td>
</tr>
<tr>
<td><strong>Performance</strong></td>
<td>~15k req/sec</td>
<td>~30k req/sec</td>
</tr>
<tr>
<td><strong>Type Safety</strong></td>
<td>Limited</td>
<td>Strong (with schemas)</td>
</tr>
<tr>
<td><strong>Plugin System</strong></td>
<td>Manual</td>
<td>First-class</td>
</tr>
</tbody></table>
<h3 id="heading-22">Express Example</h3><pre><code class="language-javascript">const express = require(&#39;express&#39;);
const AuthRoutes = require(&#39;secure-node-auth/src/middleware/AuthRoutes&#39;);

const app = express();
app.use(express.json());

const authRoutes = new AuthRoutes(auth);
app.use(&#39;/auth&#39;, authRoutes.getRouter());

app.get(&#39;/protected&#39;, auth.middleware(), (req, res) =&gt; {
  res.json({ user: req.user });
});

app.listen(3000);
</code></pre>
<h3 id="heading-23">Fastify Example</h3><pre><code class="language-javascript">const fastify = require(&#39;fastify&#39;)();
const secureNodeAuthPlugin = require(&#39;secure-node-auth/src/middleware/FastifyPlugin&#39;);

await fastify.register(secureNodeAuthPlugin, {
  authInstance: auth,
  routeOptions: { prefix: &#39;/auth&#39; }
});

fastify.get(&#39;/protected&#39;, {
  preHandler: fastify.authenticate
}, async (request) =&gt; {
  return { user: request.user };
});

await fastify.listen({ port: 3000 });
</code></pre>
<hr>
<h2 id="heading-24">üìö Additional Resources</h2><ul>
<li><a href="https://www.fastify.io/">Fastify Documentation</a></li>
<li><a href="https://www.fastify.io/docs/latest/Reference/Plugins/">Fastify Plugin Guide</a></li>
<li><a href="https://json-schema.org/">JSON Schema Validation</a></li>
<li><a href="../README.md">SecureNodeAuth Main Docs</a></li>
<li><a href="EMAIL_VERIFICATION_GUIDE.md">Email Verification Guide</a></li>
</ul>
<hr>
<h2 id="heading-25">üéØ Why Choose Fastify?</h2><p>‚úÖ <strong>2x Faster</strong> than Express<br>‚úÖ <strong>Built-in Schema Validation</strong> (no extra dependencies)<br>‚úÖ <strong>Type Safety</strong> with TypeScript support<br>‚úÖ <strong>Modern Plugin System</strong> for better modularity<br>‚úÖ <strong>Logging Built-in</strong> with Pino (production-ready)<br>‚úÖ <strong>Async/Await Native</strong> (no callback hell)  </p>
<p><strong>Bottom Line</strong>: If you&#39;re building a new API or need high performance, Fastify is the better choice. If you have an existing Express app, stick with Express support.</p>
<hr>
<p><strong>Built with ‚ù§Ô∏è for developers who love speed and simplicity!</strong></p>
</div>

        <!-- Navigation Buttons -->
        <div id="doc-navigation" class="mt-12 pt-8 border-t-2 border-gray-800"><div class="flex flex-col sm:flex-row justify-between gap-4">
      <a href="EMAIL_VERIFICATION_GUIDE.html" class="nav-button-outline">
        <i class="fas fa-arrow-left"></i>
        <span>Email Verification</span>
      </a>
      <a href="HEADLESS_APPS_GUIDE.html" class="nav-button">
        <span>Headless Apps (Part 1)</span>
        <i class="fas fa-arrow-right"></i>
      </a></div></div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="../js/static-docs.js"></script>
  </body>
</html>
